<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Fit Trackr Pro - Workout Tracker</title>
<style>
        :root {
            --color-bg: #0a0e27;
            --color-surface: #1a1f3a;
            --color-surface-hover: #252b4a;
            --color-primary: #4ECDC4;
            --color-primary-dark: #3ab8b0;
            --color-secondary: #FF6B9D;
            --color-accent: #FFD93D;
            --color-text: #e8eaf0;
            --color-text-muted: #a0a8c0;
            --color-border: rgba(78, 205, 196, 0.2);
            
            --muscle-chest: #FF6B9D;
            --muscle-back: #4ECDC4;
            --muscle-legs: #FFD93D;
            --muscle-glutes: #95E1D3;
            --muscle-shoulders: #FF8C42;
            --muscle-biceps: #6C5CE7;
            --muscle-triceps: #A29BFE;
            --muscle-forearms: #74B9FF;
            --muscle-core: #55EFC4;
            
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.3);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.4);
            --shadow-lg: 0 8px 32px rgba(0,0,0,0.5);
            --radius: 16px;
            --radius-sm: 8px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--color-bg);
            color: var(--color-text);
            overflow-x: hidden;
        }
        
        .app-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Navigation */
        .nav-sidebar {
            width: 280px;
            background: var(--color-surface);
            padding: 24px;
            box-shadow: var(--shadow-lg);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
            transition: transform 0.3s ease;
        }
        
        .nav-logo {
            font-size: 28px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .nav-item {
            padding: 16px 20px;
            margin-bottom: 8px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
        }
        
        .nav-item:hover {
            background: var(--color-surface-hover);
            transform: translateX(4px);
        }
        
        .nav-item.active {
            background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));
            color: var(--color-bg);
            box-shadow: 0 4px 16px rgba(78, 205, 196, 0.3);
        }
        
        .nav-icon {
            font-size: 20px;
        }
        
        /* Main Content */
        .main-content {
            margin-left: 280px;
            flex: 1;
            padding: 32px;
            width: calc(100% - 280px);
        }
        
        .view {
            display: none;
            animation: fadeIn 0.4s ease;
        }
        
        .view.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Dashboard */
        .dashboard-grid {
            display: grid;
            gap: 24px;
        }
        
        .card {
            background: var(--color-surface);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .card-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--color-text);
        }
        
        /* Calendar */
        .calendar {
            margin-top: 20px;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .calendar-month {
            font-size: 20px;
            font-weight: 700;
        }
        
        .calendar-nav {
            display: flex;
            gap: 12px;
        }
        
        .calendar-btn {
            background: var(--color-surface-hover);
            border: none;
            color: var(--color-text);
            padding: 8px 16px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .calendar-btn:hover {
            background: var(--color-primary);
            transform: scale(1.05);
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }
        
        .calendar-day-header {
            text-align: center;
            font-weight: 700;
            padding: 12px;
            color: var(--color-text-muted);
            font-size: 12px;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-sm);
            background: var(--color-bg);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            padding: 8px;
            min-height: 70px;
        }
        
        .calendar-day:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-sm);
        }
        
        .calendar-day.has-workout {
            border: 2px solid var(--color-primary);
            background: linear-gradient(135deg, rgba(78, 205, 196, 0.1), rgba(255, 107, 157, 0.1));
        }
        
        .calendar-day-number {
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .calendar-day-dots {
            display: flex;
            gap: 2px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .muscle-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .calendar-day:hover .muscle-dot {
            transform: scale(1.3);
        }
        
        /* Body Map */
        .body-map-container {
            display: flex;
            gap: 32px;
            align-items: flex-start;
            flex-wrap: wrap;
        }
        
        .body-diagram {
            flex: 1;
            min-width: 300px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .body-view-toggle {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            justify-content: center;
        }
        
        .toggle-btn {
            padding: 12px 24px;
            background: var(--color-surface-hover);
            border: 2px solid var(--color-border);
            color: var(--color-text);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .toggle-btn.active {
            background: var(--color-primary);
            border-color: var(--color-primary);
            color: var(--color-bg);
        }
        
        .toggle-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }
        
        .body-svg-wrapper {
            background: var(--color-bg);
            border-radius: var(--radius);
            padding: 24px;
            display: flex;
            justify-content: center;
        }
        
        #bodySvg {
            max-width: 100%;
            height: auto;
        }
        
        .muscle-group {
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.7;
        }
        
        .muscle-group:hover {
            opacity: 1;
            filter: brightness(1.3);
            stroke-width: 3;
        }
        
        .muscle-group.active {
            opacity: 1;
            filter: brightness(1.2) drop-shadow(0 0 10px currentColor);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { filter: brightness(1.2); }
            50% { filter: brightness(1.5); }
        }
        
        .muscle-stats {
            flex: 1;
            min-width: 300px;
        }
        
        .muscle-stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: var(--color-bg);
            border-radius: var(--radius-sm);
            margin-bottom: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .muscle-stat-item:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-sm);
        }
        
        .muscle-name {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
        }
        
        .muscle-color-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .muscle-value {
            font-size: 18px;
            font-weight: 700;
            color: var(--color-primary);
        }
        
        /* Metrics Tracker */
        .metrics-controls {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }
        
        .metric-select {
            flex: 1;
            min-width: 200px;
            padding: 12px 16px;
            background: var(--color-bg);
            border: 2px solid var(--color-border);
            border-radius: var(--radius-sm);
            color: var(--color-text);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            height: 44px;
            width: 100%;
        }
        
        .metric-select:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(78, 205, 196, 0.2);
        }
        
        .add-metric-btn {
            padding: 12px 24px;
            background: var(--color-primary);
            border: none;
            border-radius: var(--radius-sm);
            color: var(--color-bg);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .add-metric-btn:hover {
            background: var(--color-primary-dark);
            transform: scale(1.05);
        }
        
        .chart-container {
            background: var(--color-bg);
            border-radius: var(--radius-sm);
            padding: 24px;
            margin-top: 24px;
            height: 400px;
        }
        
        /* Exercise Library */
        .exercise-filters {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }
        
        .filter-group {
            flex: 1;
            min-width: 200px;
        }
        
        .filter-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--color-text-muted);
            font-size: 14px;
        }
        
        .exercise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .exercise-card {
            background: var(--color-bg);
            border-radius: var(--radius);
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .exercise-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
            border-color: var(--color-primary);
        }
        
        .exercise-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }
        
        .exercise-name {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .exercise-muscles {
            font-size: 12px;
            color: var(--color-text-muted);
            margin-bottom: 4px;
        }
        
        .exercise-equipment {
            display: inline-block;
            padding: 4px 12px;
            background: var(--color-surface-hover);
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-top: 8px;
        }
        
        .add-exercise-btn {
            padding: 8px 16px;
            background: var(--color-primary);
            border: none;
            border-radius: var(--radius-sm);
            color: var(--color-bg);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .add-exercise-btn:hover {
            background: var(--color-primary-dark);
            transform: scale(1.05);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            overflow-y: auto;
            animation: fadeIn 0.3s ease;
        }
        
        .modal.active {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 40px 20px;
        }
        
        .modal-content {
            background: var(--color-surface);
            border-radius: var(--radius);
            padding: 32px;
            max-width: 900px;
            width: 100%;
            box-shadow: var(--shadow-lg);
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .modal-title {
            font-size: 28px;
            font-weight: 700;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--color-text);
            font-size: 32px;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .modal-close:hover {
            background: var(--color-surface-hover);
            transform: rotate(90deg);
        }
        
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 24px 0;
        }
        
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            border-radius: var(--radius-sm);
        }
        
        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .kpi-form {
            background: var(--color-bg);
            padding: 24px;
            border-radius: var(--radius-sm);
            margin-top: 24px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-label {
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--color-text-muted);
            font-size: 14px;
        }
        
        .form-input {
            padding: 12px 16px;
            background: var(--color-surface);
            border: 2px solid var(--color-border);
            border-radius: var(--radius-sm);
            color: var(--color-text);
            font-size: 14px;
            transition: all 0.3s ease;
            width: 100%;
            height: 44px;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(78, 205, 196, 0.2);
        }
        
        input[type="date"].form-input {
            height: 44px;
        }
        
        .form-submit {
            padding: 12px 32px;
            background: var(--color-primary);
            border: none;
            border-radius: var(--radius-sm);
            color: var(--color-bg);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        
        .form-submit:hover {
            background: var(--color-primary-dark);
            transform: scale(1.05);
        }
        
        /* Workout Detail Modal */
        .workout-detail {
            margin-top: 24px;
        }
        
        .exercise-log {
            background: var(--color-bg);
            padding: 16px;
            border-radius: var(--radius-sm);
            margin-bottom: 12px;
        }
        
        .exercise-log-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .exercise-log-name {
            font-weight: 700;
            font-size: 16px;
        }
        
        .exercise-log-details {
            color: var(--color-text-muted);
            font-size: 14px;
        }
        
        /* Exercise History Chart */
        .history-chart {
            background: var(--color-bg);
            border-radius: var(--radius-sm);
            padding: 24px;
            margin-top: 24px;
        }
        
        .history-chart-header {
            margin-bottom: 16px;
        }
        
        .history-chart-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        /* Stats Summary */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .stat-card {
            background: var(--color-bg);
            padding: 20px;
            border-radius: var(--radius-sm);
            text-align: center;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 8px;
        }
        
        .stat-label {
            color: var(--color-text-muted);
            font-size: 14px;
            font-weight: 600;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--color-surface);
            box-shadow: 0 -4px 16px rgba(0, 0, 0, 0.4);
            z-index: 100;
            padding: 12px 0;
        }
        
        .bottom-nav-items {
            display: flex;
            justify-content: space-around;
            align-items: center;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .bottom-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 8px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: var(--radius-sm);
            color: var(--color-text-muted);
        }
        
        .bottom-nav-item.active {
            color: var(--color-primary);
        }
        
        .bottom-nav-item:active {
            transform: scale(0.95);
        }
        
        .bottom-nav-icon {
            font-size: 24px;
        }
        
        .bottom-nav-label {
            font-size: 11px;
            font-weight: 600;
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .nav-sidebar {
                display: none;
            }
            
            .main-content {
                margin-left: 0;
                width: 100%;
                padding-bottom: 80px;
            }
            
            .bottom-nav {
                display: block;
            }
        }
        
        .mobile-nav-toggle {
            display: none;
        }
        
        /* Loading State */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 60px;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--color-surface-hover);
            border-top-color: var(--color-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--color-text-muted);
        }
        
        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 16px;
            opacity: 0.5;
        }
        
        .empty-state-text {
            font-size: 18px;
            font-weight: 600;
        }
    </style>
</head>
<body>
<div class="app-container">
<!-- Navigation -->
<nav class="nav-sidebar" id="navSidebar">
<div class="nav-logo">üí™ Fit Trackr Pro</div>
<div class="nav-item active" onclick="switchView('dashboard')">
<span class="nav-icon">üìä</span>
                Dashboard
            </div>
<div class="nav-item" onclick="switchView('exercises')">
<span class="nav-icon">üèãÔ∏è</span>
                Exercises
            </div>
<div class="nav-item" onclick="switchView('export')">
<span class="nav-icon">üì•</span>
                Export Data
            </div>
<div class="nav-item" onclick="switchView('settings')">
<span class="nav-icon">‚öôÔ∏è</span>
                Settings
            </div>
</nav>
<!-- Main Content -->
<main class="main-content">
<!-- Dashboard View -->
<div class="view active" id="dashboard">
<div class="dashboard-grid">
<!-- Stats Summary -->
<div class="card">
<div class="card-header">
<h2 class="card-title">Workout Overview</h2>
</div>
<div class="stats-grid">
<div class="stat-card">
<div class="stat-value" id="totalWorkouts">0</div>
<div class="stat-label">Total Workouts</div>
</div>
<div class="stat-card">
<div class="stat-value" id="currentStreak">0</div>
<div class="stat-label">Current Streak</div>
</div>
<div class="stat-card">
<div class="stat-value" id="weeksCompleted">0</div>
<div class="stat-label">Weeks (5 days)</div>
</div>
<div class="stat-card">
<div class="stat-value" id="thisWeekDays">0</div>
<div class="stat-label">This Week</div>
</div>
</div>
</div>
<!-- Calendar -->
<div class="card">
<div class="card-header">
<h2 class="card-title">Workout Calendar</h2>
</div>
<div class="calendar">
<div class="calendar-header">
<div class="calendar-month" id="calendarMonth">October 2025</div>
<div class="calendar-nav">
<button class="calendar-btn" onclick="changeMonth(-1)">‚Üê Prev</button>
<button class="calendar-btn" onclick="changeMonth(1)">Next ‚Üí</button>
</div>
</div>
<div class="calendar-grid" id="calendarGrid">
<!-- Calendar will be rendered here -->
</div>
</div>
</div>
<!-- Muscle Stats - Body Map Removed -->
<div class="card">
<div class="card-header">
<h2 class="card-title">Muscle Group Activity</h2>
<select class="metric-select" id="muscleActivityPeriod" onchange="renderMuscleStats()" style="max-width: 200px; flex: none;">
<option value="30">Last 30 Days</option>
<option value="180">Last 6 Months</option>
<option value="365">Last 1 Year</option>
<option value="all">All Time</option>
</select>
</div>
<div id="muscleStatsList">
<!-- Muscle stats will be rendered here -->
</div>
</div>
<!-- Metrics Tracker -->
<div class="card">
<div class="card-header">
<h2 class="card-title">Body Metrics</h2>
</div>
<div class="metrics-controls">
<select class="metric-select" id="metricSelect" onchange="updateMetricChart()">
<option value="weight">Weight (kg)</option>
<option value="bodyFat">Body Fat %</option>
<option value="bmi">BMI</option>
</select>
<button class="add-metric-btn" onclick="showAddMetricModal()">
<span>+</span> Add Metric
                            </button>
</div>
<div class="chart-container">
<canvas id="metricsChart"></canvas>
</div>
</div>
</div>
</div>
<!-- Exercises View -->
<div class="view" id="exercises">
<div class="card">
<div class="card-header">
<h2 class="card-title">Exercise Library</h2>
<button class="add-metric-btn" onclick="showAddExerciseModal()">
<span>+</span> Add Exercise
                        </button>
</div>
<div class="exercise-filters">
<div class="filter-group" style="flex: 2;">
<label class="filter-label">Search Exercises</label>
<input class="form-input" id="exerciseSearch" oninput="filterExercises()" placeholder="Search by name..." type="text"/>
</div>
<div class="filter-group">
<label class="filter-label">Muscle Group</label>
<select class="metric-select" id="muscleFilter" onchange="filterExercises()">
<option value="all">All Muscle Groups</option>
</select>
</div>
<div class="filter-group">
<label class="filter-label">Equipment</label>
<select class="metric-select" id="equipmentFilter" onchange="filterExercises()">
<option value="all">All Equipment</option>
</select>
</div>
</div>
<div class="exercise-grid" id="exerciseGrid">
<!-- Exercises will be rendered here -->
</div>
</div>
</div>
<!-- Settings View -->
<div class="view" id="settings">
<div class="card">
<div class="card-header">
<h2 class="card-title">‚öôÔ∏è Settings &amp; Sync</h2>
</div>
<div style="max-width: 800px;">
<!-- Google Sheets Sync -->
<div style="background: var(--color-bg); padding: 24px; border-radius: var(--radius); margin-bottom: 24px; border: 2px solid var(--color-primary);">
<h3 style="font-size: 20px; margin-bottom: 8px; display: flex; align-items: center; gap: 12px;">
<span>‚òÅÔ∏è</span> Google Sheets Sync
                            </h3>
<p style="color: var(--color-text-muted); margin-bottom: 20px; line-height: 1.6;">
                                Automatically sync your workouts, metrics, and exercises to Google Sheets for cross-device access and backup.
                            </p>
<div class="form-group" style="margin-bottom: 16px;">
<label class="form-label">Google Apps Script Web App URL</label>
<input class="form-input" id="googleSheetsUrlInput" placeholder="https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec" type="url" value=""/>
<div style="font-size: 12px; color: var(--color-text-muted); margin-top: 8px;">
                                    üìö <a href="#" onclick="showGoogleSheetsSetup(); return false;" style="color: var(--color-primary); text-decoration: underline;">View setup instructions</a>
</div>
</div>
<div style="display: flex; gap: 12px; flex-wrap: wrap;">
<button class="add-metric-btn" onclick="saveGoogleSheetsUrl()">
                                    üíæ Save URL
                                </button>
<button class="add-metric-btn" onclick="syncToGoogleSheets()" style="background: var(--color-secondary);">
                                    ‚òÅÔ∏è Sync Now
                                </button>
<button class="calendar-btn" onclick="loadFromGoogleSheets()">
                                    ‚¨áÔ∏è Load from Sheets
                                </button>
</div>
<div id="syncStatus" style="margin-top: 16px; padding: 12px; border-radius: var(--radius-sm); display: none;"></div>
</div>
<!-- Auto-sync Toggle -->
<div style="background: var(--color-bg); padding: 20px; border-radius: var(--radius); margin-bottom: 24px;">
<label style="display: flex; align-items: center; gap: 12px; cursor: pointer;">
<input id="autoSyncToggle" onchange="toggleAutoSync()" style="width: 20px; height: 20px; cursor: pointer;" type="checkbox"/>
<div>
<div style="font-weight: 700; font-size: 16px;">Enable Auto-Sync</div>
<div style="color: var(--color-text-muted); font-size: 14px; margin-top: 4px;">
                                        Automatically sync data after every workout or metric update
                                    </div>
</div>
</label>
</div>
</div>
</div>
</div>
<!-- Export View -->
<div class="view" id="export">
<div class="card">
<div class="card-header">
<h2 class="card-title">Export Your Data</h2>
</div>
<div style="max-width: 600px;">
<p style="color: var(--color-text-muted); margin-bottom: 32px; line-height: 1.6;">
                            Download your workout data, body metrics, and exercise library as CSV files. 
                            These files can be opened in Excel, Google Sheets, or any spreadsheet application.
                        </p>
<div style="display: grid; gap: 20px;">
<div style="background: var(--color-bg); padding: 24px; border-radius: var(--radius); border: 2px solid var(--color-border);">
<div style="display: flex; justify-content: space-between; align-items: center;">
<div>
<h3 style="font-size: 20px; margin-bottom: 8px; font-weight: 700;">Workout History</h3>
<p style="color: var(--color-text-muted); font-size: 14px;">
                                            All your workouts with dates, exercises, sets, reps, and weights
                                        </p>
</div>
<button class="add-metric-btn" onclick="downloadWorkoutsCSV()" style="flex-shrink: 0; margin-left: 16px;">
                                        üì• Download
                                    </button>
</div>
</div>
<div style="background: var(--color-bg); padding: 24px; border-radius: var(--radius); border: 2px solid var(--color-border);">
<div style="display: flex; justify-content: space-between; align-items: center;">
<div>
<h3 style="font-size: 20px; margin-bottom: 8px; font-weight: 700;">Body Metrics</h3>
<p style="color: var(--color-text-muted); font-size: 14px;">
                                            Weight, body fat percentage, and calculated BMI over time
                                        </p>
</div>
<button class="add-metric-btn" onclick="downloadMetricsCSV()" style="flex-shrink: 0; margin-left: 16px;">
                                        üì• Download
                                    </button>
</div>
</div>
<div style="background: var(--color-bg); padding: 24px; border-radius: var(--radius); border: 2px solid var(--color-border);">
<div style="display: flex; justify-content: space-between; align-items: center;">
<div>
<h3 style="font-size: 20px; margin-bottom: 8px; font-weight: 700;">Exercise Library</h3>
<p style="color: var(--color-text-muted); font-size: 14px;">
                                            Complete list of exercises with muscle groups and equipment
                                        </p>
</div>
<button class="add-metric-btn" onclick="downloadExercisesCSV()" style="flex-shrink: 0; margin-left: 16px;">
                                        üì• Download
                                    </button>
</div>
</div>
</div>
</div>
</div>
</div>
</main>
</div>
<!-- Bottom Navigation -->
<div class="bottom-nav">
<div class="bottom-nav-items">
<div class="bottom-nav-item active" onclick="switchViewMobile('dashboard')">
<div class="bottom-nav-icon">üìä</div>
<div class="bottom-nav-label">Dashboard</div>
</div>
<div class="bottom-nav-item" onclick="switchViewMobile('exercises')">
<div class="bottom-nav-icon">üèãÔ∏è</div>
<div class="bottom-nav-label">Exercises</div>
</div>
<div class="bottom-nav-item" onclick="switchViewMobile('export')">
<div class="bottom-nav-icon">üì•</div>
<div class="bottom-nav-label">Export</div>
</div>
<div class="bottom-nav-item" onclick="switchViewMobile('settings')">
<div class="bottom-nav-icon">‚öôÔ∏è</div>
<div class="bottom-nav-label">Settings</div>
</div>
</div>
</div>
<!-- Exercise Detail Modal -->
<div class="modal" id="exerciseModal">
<div class="modal-content">
<div class="modal-header">
<h2 class="modal-title" id="modalExerciseName">Exercise</h2>
<button class="modal-close" onclick="closeModal('exerciseModal')">√ó</button>
</div>
<div id="modalExerciseDetails">
<!-- Exercise details will be rendered here -->
</div>
</div>
</div>
<!-- Workout Detail Modal -->
<div class="modal" id="workoutModal">
<div class="modal-content">
<div class="modal-header">
<h2 class="modal-title" id="modalWorkoutDate">Workout Details</h2>
<button class="modal-close" onclick="closeModal('workoutModal')">√ó</button>
</div>
<div class="workout-detail" id="workoutDetailContent">
<!-- Workout details will be rendered here -->
</div>
</div>
</div>
<!-- Muscle History Modal -->
<div class="modal" id="muscleHistoryModal">
<div class="modal-content">
<div class="modal-header">
<h2 class="modal-title" id="modalMuscleName">Muscle History</h2>
<button class="modal-close" onclick="closeModal('muscleHistoryModal')">√ó</button>
</div>
<div id="muscleHistoryContent">
<!-- Muscle history will be rendered here -->
</div>
</div>
</div>
<!-- Add Metric Modal -->
<div class="modal" id="addMetricModal">
<div class="modal-content">
<div class="modal-header">
<h2 class="modal-title">Add Body Metric</h2>
<button class="modal-close" onclick="closeModal('addMetricModal')">√ó</button>
</div>
<div style="background: var(--color-bg); padding: 16px; border-radius: var(--radius-sm); margin-bottom: 24px;">
<div style="display: flex; gap: 24px; flex-wrap: wrap;">
<div>
<div style="font-size: 12px; color: var(--color-text-muted); margin-bottom: 4px;">YOUR HEIGHT</div>
<div style="font-size: 18px; font-weight: 700;">5'11" (180.34 cm)</div>
</div>
<div>
<div style="font-size: 12px; color: var(--color-text-muted); margin-bottom: 4px;">CURRENT BMI</div>
<div id="modalCurrentBMI" style="font-size: 18px; font-weight: 700; color: var(--color-primary);">‚Äî</div>
</div>
</div>
</div>
<form class="kpi-form" onsubmit="saveMetric(event)">
<div class="form-grid">
<div class="form-group">
<label class="form-label">Date</label>
<input class="form-input" id="metricDate" required="" type="date"/>
</div>
<div class="form-group">
<label class="form-label">Weight (kg)</label>
<input class="form-input" id="metricWeight" oninput="updateModalBMI()" step="0.1" type="number"/>
</div>
<div class="form-group">
<label class="form-label">Body Fat %</label>
<input class="form-input" id="metricBodyFat" step="0.1" type="number"/>
</div>
</div>
<button class="form-submit" type="submit">Save Metric</button>
</form>
</div>
</div>
<!-- Exercise History Modal -->
<div class="modal" id="exerciseHistoryModal">
<div class="modal-content">
<div class="modal-header">
<h2 class="modal-title" id="modalExerciseHistoryName">Exercise History</h2>
<button class="modal-close" onclick="closeModal('exerciseHistoryModal')">√ó</button>
</div>
<div class="history-chart">
<canvas id="exerciseHistoryChart"></canvas>
</div>
<div id="exerciseHistoryList" style="margin-top: 24px;">
<!-- Exercise history list will be rendered here -->
</div>
</div>
</div>
<!-- Google Sheets Setup Modal -->
<div class="modal" id="googleSheetsSetupModal">
<div class="modal-content" style="max-width: 800px;">
<div class="modal-header">
<h2 class="modal-title">üìö Google Sheets Setup Guide</h2>
<button class="modal-close" onclick="closeModal('googleSheetsSetupModal')">√ó</button>
</div>
<div style="line-height: 1.8; color: var(--color-text);">
<h3 style="margin: 24px 0 16px 0; font-size: 20px; color: var(--color-primary);">Step 1: Create a Google Sheet</h3>
<ol style="margin-left: 20px;">
<li style="margin-bottom: 12px;">Go to <a href="https://sheets.google.com" style="color: var(--color-primary); text-decoration: underline;" target="_blank">sheets.google.com</a></li>
<li style="margin-bottom: 12px;">Create a new blank spreadsheet</li>
<li style="margin-bottom: 12px;">Name it "Fit Trackr Pro Data"</li>
<li style="margin-bottom: 12px;">Create three sheets: <strong>Workouts</strong>, <strong>Metrics</strong>, and <strong>Exercises</strong></li>
</ol>
<h3 style="margin: 24px 0 16px 0; font-size: 20px; color: var(--color-primary);">Step 2: Create Google Apps Script</h3>
<ol style="margin-left: 20px;">
<li style="margin-bottom: 12px;">In your Google Sheet, go to <strong>Extensions ‚Üí Apps Script</strong></li>
<li style="margin-bottom: 12px;">Delete any code and paste this script:</li>
</ol>
<pre style="background: var(--color-bg); padding: 16px; border-radius: var(--radius-sm); overflow-x: auto; font-size: 12px; margin: 16px 0;"><code>// Add this SHEET_ID at the top - replace with your actual Sheet ID
const SHEET_ID = 'YOUR_SHEET_ID_HERE'; // Get from Sheet URL

function doPost(e) {
  // Open specific sheet by ID (requires no Drive access)
  const sheet = SpreadsheetApp.openById(SHEET_ID);
  const data = JSON.parse(e.postData.contents);
  
  if (data.type === 'workouts') {
    const ws = sheet.getSheetByName('Workouts');
    ws.clear();
    ws.appendRow(['Date', 'Exercise', 'Muscle', 'Sets', 'Reps', 'Weight', 'Duration']);
    data.workouts.forEach(w =&gt; {
      w.exercises.forEach(ex =&gt; {
        ws.appendRow([w.date, ex.name, ex.muscle, ex.sets || '', ex.reps || '', ex.weight || '', ex.duration || '']);
      });
    });
  } else if (data.type === 'metrics') {
    const ms = sheet.getSheetByName('Metrics');
    ms.clear();
    ms.appendRow(['Date', 'Weight', 'Body Fat %', 'BMI']);
    data.metrics.forEach(m =&gt; {
      ms.appendRow([m.date, m.weight || '', m.bodyFat || '', m.bmi || '']);
    });
  } else if (data.type === 'exercises') {
    const es = sheet.getSheetByName('Exercises');
    es.clear();
    es.appendRow(['Name', 'Primary Muscle', 'Secondary', 'Equipment', 'Videos']);
    data.exercises.forEach(ex =&gt; {
      es.appendRow([ex.name, ex.primary, ex.secondary, ex.equipment, ex.videos]);
    });
  }
  
  return ContentService.createTextOutput(JSON.stringify({success: true}));
}

function doGet(e) {
  // Open specific sheet by ID (requires no Drive access)
  const sheet = SpreadsheetApp.openById(SHEET_ID);
  const type = e.parameter.type;
  
  if (type === 'workouts') {
    const ws = sheet.getSheetByName('Workouts');
    const data = ws.getDataRange().getValues();
    return ContentService.createTextOutput(JSON.stringify({workouts: data}));
  } else if (type === 'metrics') {
    const ms = sheet.getSheetByName('Metrics');
    const data = ms.getDataRange().getValues();
    return ContentService.createTextOutput(JSON.stringify({metrics: data}));
  } else if (type === 'exercises') {
    const es = sheet.getSheetByName('Exercises');
    const data = es.getDataRange().getValues();
    return ContentService.createTextOutput(JSON.stringify({exercises: data}));
  }
  
  return ContentService.createTextOutput(JSON.stringify({error: 'Invalid type'}));
}</code></pre>
<h3 style="margin: 24px 0 16px 0; font-size: 20px; color: var(--color-primary);">Step 3: Get Your Sheet ID</h3>
<ol style="margin-left: 20px;">
<li style="margin-bottom: 12px;">Look at your Google Sheet URL</li>
<li style="margin-bottom: 12px;">Copy the ID between <code>/d/</code> and <code>/edit</code></li>
<li style="margin-bottom: 12px;">Example: <code>https://docs.google.com/spreadsheets/d/<strong>1ABC...XYZ</strong>/edit</code></li>
<li style="margin-bottom: 12px;">Replace <code>YOUR_SHEET_ID_HERE</code> in the script with your ID</li>
</ol>
<h3 style="margin: 24px 0 16px 0; font-size: 20px; color: var(--color-primary);">Step 4: Deploy as Web App</h3>
<ol style="margin-left: 20px;">
<li style="margin-bottom: 12px;">Click <strong>Deploy ‚Üí New deployment</strong></li>
<li style="margin-bottom: 12px;">Select type: <strong>Web app</strong></li>
<li style="margin-bottom: 12px;">Execute as: <strong>Me</strong></li>
<li style="margin-bottom: 12px;">Who has access: <strong>Anyone</strong></li>
<li style="margin-bottom: 12px;">Click <strong>Deploy</strong></li>
<li style="margin-bottom: 12px;">‚ö†Ô∏è <strong>Important:</strong> Authorize only <strong>this specific spreadsheet</strong> (not all Drive files)</li>
<li style="margin-bottom: 12px;">Copy the <strong>Web app URL</strong></li>
<li style="margin-bottom: 12px;">Paste it in the Settings page above</li>
</ol>
<h3 style="margin: 24px 0 16px 0; font-size: 20px; color: var(--color-primary);">Step 5: Test the Connection</h3>
<ol style="margin-left: 20px;">
<li style="margin-bottom: 12px;">Click <strong>Save URL</strong> in Settings</li>
<li style="margin-bottom: 12px;">Click <strong>Sync Now</strong></li>
<li style="margin-bottom: 12px;">Check your Google Sheet - data should appear!</li>
</ol>
<div style="background: rgba(78, 205, 196, 0.1); padding: 16px; border-radius: var(--radius-sm); border: 2px solid var(--color-primary); margin-top: 24px;">
<strong style="color: var(--color-primary);">‚úÖ That's it!</strong> Your data will now sync automatically across all your devices.
                </div>
</div>
</div>
</div>
<!-- Add New Exercise Modal -->
<div class="modal" id="addExerciseModal">
<div class="modal-content">
<div class="modal-header">
<h2 class="modal-title">Add New Exercise</h2>
<button class="modal-close" onclick="closeModal('addExerciseModal')">√ó</button>
</div>
<form class="kpi-form" onsubmit="saveNewExercise(event)">
<div class="form-group">
<label class="form-label">Exercise Name</label>
<input class="form-input" id="newExerciseName" required="" type="text"/>
</div>
<div class="form-grid">
<div class="form-group">
<label class="form-label">Primary Muscle</label>
<select class="metric-select" id="newExercisePrimaryMuscle" required="">
<option value="">Select Muscle</option>
</select>
</div>
<div class="form-group">
<label class="form-label">Equipment</label>
<select class="metric-select" id="newExerciseEquipment" required="">
<option value="">Select Equipment</option>
<option value="Barbell">Barbell</option>
<option value="Dumbbell">Dumbbell</option>
<option value="Cable">Cable</option>
<option value="Machine">Machine</option>
<option value="Resistance Band">Resistance Band</option>
<option value="Body Weight">Body Weight</option>
<option value="Treadmill">Treadmill</option>
<option value="Pool">Pool</option>
</select>
</div>
</div>
<div class="form-group">
<label class="form-label">Secondary Muscles (comma separated)</label>
<input class="form-input" id="newExerciseSecondaryMuscles" placeholder="e.g., Biceps, Triceps" type="text"/>
</div>
<div class="form-group">
<label class="form-label">KPI Types</label>
<div style="display: flex; gap: 16px; flex-wrap: wrap; margin-top: 8px;">
<label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
<input name="kpiType" style="width: 20px; height: 20px;" type="checkbox" value="sets"/>
<span>Sets</span>
</label>
<label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
<input name="kpiType" style="width: 20px; height: 20px;" type="checkbox" value="reps"/>
<span>Reps</span>
</label>
<label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
<input name="kpiType" style="width: 20px; height: 20px;" type="checkbox" value="weight"/>
<span>Weight</span>
</label>
<label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
<input name="kpiType" style="width: 20px; height: 20px;" type="checkbox" value="duration"/>
<span>Duration</span>
</label>
</div>
</div>
<div class="form-group">
<label class="form-label">YouTube Video URLs (one per line)</label>
<textarea class="form-input" id="newExerciseVideos" placeholder="https://www.youtube.com/watch?v=...
https://www.youtube.com/watch?v=..." rows="4" style="resize: vertical; font-family: inherit;"></textarea>
<div style="font-size: 12px; color: var(--color-text-muted); margin-top: 4px;">
                        Enter full YouTube URLs or embed URLs
                    </div>
</div>
<button class="form-submit" type="submit">Add Exercise</button>
</form>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
// === Persistent Google Sheets URL + Favourites Integration ===
let exercises = JSON.parse(localStorage.getItem('exercises')) || [];
let favorites = JSON.parse(localStorage.getItem('fittrackr_favorites')) || [];
let sheetURL = localStorage.getItem('fittrackr_sheetURL') || '';

function initApp(){
  const urlInput = document.getElementById('sheetURL');
  if (sheetURL && urlInput) urlInput.value = sheetURL;
  if (document.getElementById('searchExercises')) {
    document.getElementById('searchExercises').addEventListener('input', renderExercises);
    renderExercises();
  }
}

function saveSheetURL(){
  const url = document.getElementById('sheetURL').value.trim();
  if(url){
    localStorage.setItem('fittrackr_sheetURL', url);
    sheetURL = url;
    alert('Google Sheet URL saved successfully and will persist after refresh!');
  }
}

async function loadFromSheets(){
  if(!sheetURL){ alert('Please add your Google Sheets URL first.'); return; }
  try{
    const res = await fetch(sheetURL + '?action=load');
    const data = await res.json();
    if(data.exercises) {
      exercises = data.exercises;
      localStorage.setItem('exercises', JSON.stringify(exercises));
    }
    if(data.favorites) {
      favorites = data.favorites;
      localStorage.setItem('fittrackr_favorites', JSON.stringify(favorites));
    }
    alert('Data successfully loaded from Google Sheets!');
    renderExercises();
  } catch(err) {
    alert('Error loading data from Google Sheets.');
    console.error(err);
  }
}

async function saveToSheets(){
  if(!sheetURL){ alert('Please add your Google Sheets URL first.'); return; }
  if(!confirm('This will overwrite data in the connected Google Sheet. Continue?')) return;
  try {
    const body = JSON.stringify({ action:'save', exercises, favorites });
    await fetch(sheetURL, { method:'POST', body });
    alert('Data successfully saved to Google Sheets!');
  } catch(err) {
    alert('Failed to save to Google Sheets.');
    console.error(err);
  }
}

function renderExercises(){
  const container = document.getElementById('exerciseList');
  if(!container) return;
  container.innerHTML = '';
  const query = (document.getElementById('searchExercises')?.value || '').toLowerCase();
  exercises.filter(e => e.name.toLowerCase().includes(query)).forEach(e => {
    const card = document.createElement('div');
    card.className = 'exercise-card';
    card.innerHTML = `<strong>${e.name}</strong><br><small>${e.muscle}</small>`;
    const fav = document.createElement('span');
    fav.className = 'exercise-fav' + (favorites.includes(e.name)?' active':'');
    fav.innerHTML = '‚òÖ';
    fav.onclick = () => toggleFavorite(e.name);
    card.appendChild(fav);
    container.appendChild(card);
  });
}

function toggleFavorite(name){
  if(favorites.includes(name)) favorites = favorites.filter(f => f !== name);
  else favorites.push(name);
  localStorage.setItem('fittrackr_favorites', JSON.stringify(favorites));
  renderExercises();
}

window.onload = initApp;
</script></body>
</html>
